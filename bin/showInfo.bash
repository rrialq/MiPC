#!/bin/bash

. /etc/os-release

UPTIME="`TZ=UTC date -d@$(cut -d\  -f1 /proc/uptime) +'%j %T' | awk '{print $1-1"d",$2}'`"
SCREEN_RESOLUTION="`xrandr | grep '*' | awk '{ print $1 }'`"
DISPLAY_MANAGER="`ps auxf | awk '{print $11}' | \grep -e "^/.*dm$" -e "/.*slim$"`"
WINDOW_MANAGER="`wmctrl -m | grep "Name:" | awk '{print $2}'`"
window_manager="`echo $WINDOW_MANAGER | awk '{ print tolower($0) }'`"
WINDOW_MANAGER_VERSION="`dpkg-query -l ${window_manager}* | grep ii | awk '{ print $3 }'`"
THEME="`env|grep THEME`"
THEME="${THEME#*=}"
WM="`gconftool-2 -g /desktop/gnome/interface/gtk_theme` `gconftool-2 -g /desktop/gnome/interface/icon_theme`"
CPU="`cat /proc/cpuinfo | grep "model name.*:" | head -n1 | cut -f3-10 -d" "`"
CPU_COUNT="`cat /proc/cpuinfo | grep processor | wc -l`"
PROCESS_UNITS="`nproc`"
MEM_TOTAL="`cat /proc/meminfo | grep "MemTotal:" | head -n1 | awk '{print $2" "$3}'`"
MEM_FREE="`cat /proc/meminfo | grep "MemFree:" | head -n1 | awk '{print $2" "$3}'`"
SO_INSTALLED_DATE="`ls -alct /|tail -1|awk '{print $6, $7, $8}'`"

echo "    ####      ####        ###    ${SHELL} > `whoami`@`hostname`: ${HOME}"
echo "    ####      ####        ###    Sistema operativo: ${NAME} ${VERSION} (${SO_INSTALLED_DATE})"
echo "    ####      ####        ###    Kernel: `uname -mrs`"
echo "######################    ###    Window Manager: ${WINDOW_MANAGER}-${WINDOW_MANAGER_VERSION}: ${SCREEN_RESOLUTION} ($XDG_CURRENT_DESKTOP)"
echo "######################    ###    Tiempo activo: $UPTIME"
echo "    ####      ####        ###    "
echo "    ####      ####        ###    CPU: (${CPU_COUNT}) ${CPU}"
echo "    ####      ####        ###    Memoria: ${MEM_FREE} / ${MEM_TOTAL}"
echo "######################    ###"
echo "######################    ###"
echo "    ####      ####           "
echo "    ####      ####        ###"
echo "    ####      ####        ###"
printf ""
